<html>

<head>

</head>
<body>
    <h1>The Assignment</h1>
    <section>
        <div>
            <p>GPS</p>
            <p id="gps">Data: ...</p>
        </div>
        <div>
            <p>Current Speed</p>
            <p id="speed">Data: ...</p>
        </div>
        <div>
            <p>State of Change</p>
            <p id="soc">Data: ...</p>
        </div>
        <div>
            <p>Energy</p>
            <p id="energy">Data: ...</p>
        </div>
        <div>
            <p>Odometer</p>
            <p id="odo">Data: ...</p>
        </div>
    </section>
    <section>
        <p>Speed profiel</p>

        <p>State of Charfe Profile</p>
    </section>
    <p>websocket test</p>
</body>

<script>
  var gps = document.getElementById("gps")
  var speed = document.getElementById("speed")
  var soc = document.getElementById("soc")
  var energy = document.getElementById("energy")
  var odo = document.getElementById("odo")

  // CREATE A NEW WEBSOCKETS CONNECTION
  const url = 'ws://localhost:3000'
  const connection = new WebSocket(url)


  // 1. op connection open, error en message
  // 2  change you e.data back to an object
  // 3 get all HTML element you want to change the content of
  // 4. assign all the correct data to the correct HTML element

  // 5. start with Vue.js
  // NOW with hints
  // 6. connect the websocket connection in a lifecycle method (check the docs of vuejs.org getting started
  // 7. set the layout e.g. the HTML like you did in the index.html
  // 8. assign the 

  connection.onopen = () => {
    console.log("connection open")
  }

  connection.onmessage = e => {
    var dataObj = JSON.parse(e.data)
    console.log(dataObj)

    gps.innerHTML = dataObj.gps
    speed.innerHTML = dataObj.speed
    soc.innerHTML = dataObj.soc
    energy.innerHTML = dataObj.energy
    odo.innerHTML = dataObj.odo
  }

  connection.onerror = error => {
    console.log(`Websocket error: ${error}`)
  }
</script>
</html>
